\PassOptionsToPackage{latin,english}{babel}
\documentclass[twoside,makeidx,hidelinks]{book}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{xspace}
\usepackage{subcaption}
\usepackage{combelow}
\usepackage{newunicodechar}
\usepackage{upgreek}
\usepackage{booktabs}
\usepackage{afterpage}
\usepackage{eurosym}
\usepackage{tabu}
\usepackage{wrapfig}
\usepackage{tikz}
\usepackage{CJKutf8}
\newcommand{\chinese}[1]{\begin{CJK}{UTF8}{bsmi}#1\end{CJK}}
\newunicodechar{ș}{\cb{s}}
\newunicodechar{ț}{\cb{t}}

%% \usepackage{fontspec,xunicode,xltxtra}
%% \setromanfont[Mapping=tex-text]{Times}
%% \setsansfont[Mapping=tex-text]{Lucida Grande}.
%% \setmonofont{Courier New}

\usepackage{pdfpages}

% set paper size and margins; needs to be adapted for A5 ideally, we
% should have a document class for conference handbooks where A5
% vs. letter-halved is a class option
\usepackage[
  paperheight=210mm,
  paperwidth=148mm,
  footskip=.57in,
  inner=.7in,
  outer=.45in,
  bottom=.92in,
  top=.7in,
  twoside]{geometry}


\usetikzlibrary[positioning]
\usetikzlibrary{patterns}
\usepackage{pdfpages}
\newcounter{dummy} % hack, see content/maps.tex, not sure if it works though

% Lots of macros
\input{\VAR{build_dir}/content/special/preamble}
\input{\VAR{build_dir}/content/special/macros}

\input{\VAR{build_dir}/content/setup/venues}    % macros for event locations
\input{\VAR{build_dir}/content/setup/sessions}  % session titles and venues

%\usepackage{fourier} % use modern font, not the ghastly 90s fonts plaguing most ACL style files

\renewcommand{\normalsize}{\fontsize{8}{9}\selectfont}
\renewcommand{\small}{\fontsize{7}{8}\selectfont}
\renewcommand{\footnotesize}{\fontsize{6}{6}\selectfont}
\renewcommand{\large}{\fontsize{10}{11}\selectfont}
\renewcommand{\Large}{\fontsize{12}{14}\selectfont}
\renewcommand{\huge}{\fontsize{14}{17}\selectfont}

% version of \cleardoublepage to ensure we use an even page
% standard \cleardoublepage will ensure odd page
\makeatletter
\newcommand*\cleardoublepageEVEN{\clearpage\if@twoside
  \ifodd\c@page \hbox{}\newpage\if@twocolumn\hbox{}%
  \newpage\fi\fi\fi}
\makeatother

% for each part of the conference, add the .bib file produced with
% meta2bibtex.py here:

% Set indents to zero everywhere.
\setlength{\parindent}{0pt}

%TO BE UNCOMMENTED
%\bibliography{auto/tacl/papers.bib}
%
%
%
%\bibliography{auto/BioNLP/papers.bib}
%\bibliography{auto/CALCS/papers.bib}
%\bibliography{auto/CogCL/papers.bib}
%\bibliography{auto/DLNLPLR/papers.bib}
%\bibliography{auto/ECONLP/papers.bib}
%\bibliography{auto/MML_Challenge/papers.bib}
%\bibliography{auto/MRQA/papers.bib}
%\bibliography{auto/MSR/papers.bib}
%\bibliography{auto/NEWS/papers.bib}
%\bibliography{auto/NLPOSS/papers.bib}
%\bibliography{auto/NLPTEA/papers.bib}
%\bibliography{auto/NMT/papers.bib}
%\bibliography{auto/RELNLP/papers.bib}
%\bibliography{auto/RepL4NLP/papers.bib}
%\bibliography{auto/SocialNLP/papers.bib}
%\bibliography{auto/demos/papers.bib}
%\bibliography{auto/papers/papers.bib}
%\bibliography{auto/srw/papers.bib}
\bibliography{auto/tutorial/papers.bib}
%
%% Special bib for the workshops
%\bibliography{content/workshops/papers.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% General use jinja macros.
\BLOCK{macro committee_member(member)}\VAR{member.first_name} \BLOCK{if member.middle_name is defined}\VAR{member.middle_name} \BLOCK{endif}\VAR{member.last_name}\BLOCK{if member.institution is defined}, \VAR{member.institution}\BLOCK{endif}\BLOCK{endmacro}

%%%%%%%%%%%%
% DOCUMENT %
%%%%%%%%%%%%
\begin{document}
\thispagestyle{empty}
\fancyfoot[C]{}

%%%%%%%
% TOC %
%%%%%%%
\fancyfoot[C]{\thepage}
\pagenumbering{roman}
\addcontentsline{toc}{chapter}{Table of Contents}
\setcounter{tocdepth}{2}
\tableofcontents
\pagestyle{fancy}

\chapter{Conference Information}
\pagenumbering{arabic}
\setheaders{}{}

%%%%%%%%%%%
% Workshops %
%%%%%%%%%%%
\setheaders{Workshops}{Workshops}
\chapter{Workshops}
\section{Overview}
During the days of the workshops, \textbf{Registration} will be held from 07:30.
      \leavevmode\newline \leavevmode\newline
\BLOCK{for date in workshop_days}
    \large{\textbf{\VAR{program_date(date)}}} \leavevmode\newline
    \noindent\rule{\textwidth}{0.4pt}
    \begin{longtable}{p{28mm}p{84mm}p{15mm}}
    \BLOCK{for workshop in workshops}
        \BLOCK{if workshop.date is equalto(date) or workshop.date2 is equalto(date)}
          \BLOCK{if detailed or True}
          \small{\VAR{workshop.location}} & \small{\VAR{workshop.title}} & \small{  p.\pageref{w\VAR{workshop.id}}} \\\\
          \BLOCK{else}
          \small{\VAR{workshop.location}} & \small{\VAR{workshop.title}} &  \\\\
          \BLOCK{endif}
        \BLOCK{endif}
    \BLOCK{endfor}
    \end{longtable}
    \vspace{0.3cm}
\BLOCK{endfor}
\BLOCK{for date in workshop_days2}
    \large{\textbf{More days} \leavevmode\newline
    \noindent\rule{\textwidth}{0.4pt}
    \begin{longtable}{p{28mm}p{84mm}p{15mm}}
    \BLOCK{for workshop in workshops}
        \BLOCK{if workshop.date is equalto(date) or workshop.date2 is equalto(date)}
          \small{\VAR{workshop.location}} & \small{\VAR{workshop.title}} & \small{  p.\pageref{w\VAR{workshop.id}}} \\\\
        \BLOCK{endif}
    \BLOCK{endfor}
    \end{longtable}
    \vspace{0.5cm}
\BLOCK{endfor}
\newpage

\BLOCK{if detailed or True}
\BLOCK{for workshop in workshops}
    \section{\VAR{workshop.title}}
    \label{w\VAR{workshop.id}}
    \begin{center}
        \textbf{Organizers:}\\
        \VAR{workshop.chair}\\ \leavevmode\newline {\normalsize\url{\VAR{workshop.url}}}
        \\\large{Venue: \VAR{workshop.location}}\\
        \large{
            \textbf{\VAR{program_date(workshop.date)}}
            \BLOCK{if workshop.date2}
             \textbf{- \VAR{program_date(workshop.date2)}}
            \BLOCK{endif}
        }\\

    \end{center}
        {\normalsize \VAR{workshop.abstract}} \leavevmode\newline \leavevmode\newline

    \vspace*{0.1cm}
    \setheaders{}{}

    \BLOCK{for date, pages in program_workshops[workshop.id]}
    \vspace*{-0.6cm}
      \BLOCK{set ns = namespace(first=true)}
      \BLOCK{for page in pages}
      %\setlength\extrarowheight{-100pt}
      \vspace*{-0.6cm}
        \begin{longtable}{p{20mm}p{94mm}}
        \BLOCK{for entry in page}
          \BLOCK{if entry.type is equalto("header")}
          \small{\VAR{session_times(entry)}} & \small{\textbf{\emph{\VAR{entry.title}}} \BLOCK{if entry.chair} - Chair: \VAR{entry.chair}\BLOCK{endif}  } \\\\
          \BLOCK{endif}
          \BLOCK{if entry.type is equalto("paper")}
            \BLOCK{for wpa in workshop_papers[workshop.id]}
              \BLOCK{if wpa.id == entry.paper.id}
                \BLOCK{if entry.paper.start_time}
                  \footnotesize{\VAR{entry.paper.start_time.strftime('%H:%M')}-\VAR{entry.paper.end_time.strftime('%H:%M')}}
                \BLOCK{endif}
                &
                \small{\emph{\VAR{wpa.title}}}  \\
                & \small{\VAR{join_names(", ", wpa.authors, " and ")}}\BLOCK{if wpa.speaker} - Speaker: \VAR{wpa.speaker} \BLOCK{endif} \\\\
              \BLOCK{endif}
            \BLOCK{endfor}
          \BLOCK{endif}
        \BLOCK{endfor}
        \end{longtable}
        \BLOCK{set ns.first = false}
      \BLOCK{endfor}
    \BLOCK{endfor}
    \newpage
\BLOCK{endfor}
\BLOCK{endif}
\newpage

\end{document}
